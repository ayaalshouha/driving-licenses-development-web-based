<app-confirmation-dialog
  [isVisible]="isDialogVisible()"
  message="Are you sure you want to issue license for this application?"
  title="Confirm"
  (confirmed)="onDialogResult($event)"
>
</app-confirmation-dialog>
<app-notification></app-notification>
<app-dialog-wrapper title="Application > Preview Application">
  <div class="container">
    <fieldset>
      <legend>Application Info</legend>
      <div class="control-row">
        <div class="control">
          <label for="app-id">Local Driving License Applicantion ID</label>
          <p id="app-id">
            {{
              current_application != undefined ? current_application!.id : "N/A"
            }}
          </p>
        </div>
      </div>
      <div class="control-row">
        <div class="control">
          <label for="full-name">Applicant Full Name</label>
          <p id="full-name">
            {{
              current_application != undefined
                ? current_application!.fullName
                : "N/A"
            }}
          </p>
        </div>
        <div class="control">
          <label for="national-id">National ID</label>
          <p id="national-id">
            {{
              current_application != undefined
                ? current_application!.nationalID
                : "N/A"
            }}
          </p>
        </div>
        <div class="control">
          <label for="class-name">License Class</label>
          <p id="class-name">
            {{
              current_application != undefined
                ? current_application!.class
                : "N/A"
            }}
          </p>
        </div>
      </div>
      <div class="control-row">
        <div class="control">
          <label for="test-count">Passed Tests Count</label>
          <p id="test-count">
            {{
              current_application != undefined
                ? current_application!.passedTest
                : "N/A"
            }}
          </p>
        </div>

        <div class="control">
          <label for="status">Application Status</label>
          <p id="status">
            {{
              current_application != undefined
                ? current_application!.status
                : "N/A"
            }}
          </p>
        </div>
        <div class="control">
          <label for="date">Application Date</label>
          <p id="date">
            {{
              current_application != undefined
                ? current_application!.date
                : "N/A"
            }}
          </p>
        </div>
      </div>
      @if(new_license_id){
      <div class="control-row">
        <div class="control">
          <label for="license-id"
            >License ID assioated with this application</label
          >
          <p id="license-id">
            {{ new_license_id! }}
          </p>
        </div>
      </div>
      }

      <div class="actions">
        <a
          routerLink="../add-edit-application"
          [queryParams]="{
            mode: 'edit',
            application_id: application_id
          }"
          >Edit person's basic information?
        </a>
        <div class="actions">
          @if(current_application?.passedTest == 3 &&
          current_application?.status == 'New'){

          <button
            class="button"
            (click)="issueLicenseFirsttime()"
          >
            Issue License
          </button>
          }
          <button class="button" (click)="onClose()">OK</button>
        </div>
      </div>
    </fieldset>
  </div>
</app-dialog-wrapper>
